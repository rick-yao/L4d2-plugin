# L4D2 Tank 抽奖插件

## 基本功能

此插件是为《求生之路 2》编写的 SourceMod 插件，当玩家用近战武器击败坦克时，会触发“幸运抽奖”功能。最后一击击杀坦克的幸运玩家将有机会赢取各种影响游戏的奖品。

## 可能的奖品

该插件包含以下可能的奖项：

**默认生成的配置无奖品奖项概率为10，其他均为0，请自行设置**  
**单个奖项概率计算方法为：(奖项概率)/(所有奖项概率之和)** 

1. 无奖品
2. 幸运玩家增加随机生命值(幸存者总血量无法突破服务器设置的最大生命值)
3. 所有幸存者平均生命值(平均所有站立状态幸存者的实际血量，清空临时血量)
4. 重置所有人血量(将所有人血量设置为100，清空倒地次数记数)
5. 清空所有幸存者的血量(将所有站立状态幸存者实际血量变成1，清空临时血量)
6. 幸运玩家受到随机伤害(伤害超过血量时，清空血量而不是倒地)
7. 所有幸存者开启无限弹药(游戏全局参数，重复抽取会恢复默认，和主武器无限弹药只能同时有一个生效)
8. 所有幸存者开启主武器无限弹药(游戏全局参数，重复抽取会恢复默认，和无限弹药只能同时有一个生效)
9. 所有幸存者开启无限近战范围(游戏全局参数，重复抽取会恢复默认)
10. 限时将世界重力调整为月球重力(游戏全局参数，爬梯子不可解除buff,重复抽取重置计时器)
11. 幸运玩家限时调整为月球重力(爬梯子可以解除buff)
12. 将世界重力切换为月球重力(游戏全局参数，爬梯子不可解除buff,重复抽取会恢复默认值)
13. 幸运玩家增加重力(爬梯子可以解除buff)
14. 杀死幸运玩家
15. 杀死所有幸存者
16. 复活所有死亡幸存者
17. 缴械幸运玩家(清空所有槽位道具)
18. 缴械所有幸存者(清空所有槽位道具)
19. 一个幸运坦克
20. 一个幸运女巫
21. 将幸运玩家变成“定时炸弹”(重复抽取会取消计时)
22. 将幸运玩家变成“冰冻炸弹”(重复抽取会取消计时)
23. 取消人物光圈概率(取消人物轮廓光圈，人物头上的名字依然保留，不建议使用，很多插件会修改光圈)

## 配置

该插件高度可配置。

所有这些设置都可以通过 ConVars 进行修改，可以在插件的配置文件中找到并调整。

要自定义插件，请在您第一次在服务器上运行插件后，前往 SourceMod 的`addons/sourcemod/configs/`目录下找到并修改`l4d2_tank_draw.cfg`文件。

## 安装

1. 将 `l4d2_tank_draw.smx` 文件放入 `addons/sourcemod/plugins/` 目录。
2. 将 `l4d2_tank_draw.phrases.txt` 文件放入 `addons/sourcemod/translations/` 目录。
3. 重启您的服务器，或使用 `sm plugins reload` 命令加载插件。
4. 插件在首次运行后会自动创建其配置文件 (`l4d2_tank_draw.cfg`)，可在 `addons/sourcemod/configs/` 目录下找到。
5. 修改配置并再次加载插件

尽情享受近战击杀坦克后触发的随机奖品吧！

#### 注意

由于无限弹药也适用于燃烧弹，所以当玩家在无限弹药期间投掷燃烧弹时，我添加了一种机制以随机缴械/杀死/变成炸弹投掷燃烧弹的玩家，如果不需要此功能，可以将惩罚概率设置为0。
